<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LAST LETTER • Your Own word.txt</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Roboto+Mono:wght@400;700&display=swap');
    *{margin:0;padding:0;box-sizing:border-box;}
    body{
      height:100vh;background:#000;color:#0f0;font-family:'Courier New',monospace;
      overflow:hidden;display:flex;flex-direction:column;align-items:center;justify-content:center;
      user-select:none;
    }
    #startScreen,#game{display:none;text-align:center;}
    #startScreen{display:block;}
    h1{font-family:'Orbitron',sans-serif;font-size:70px;color:#0f0;text-shadow:0 0 30px #0f0;margin-bottom:40px;}
    button{padding:20px 60px;font-size:40px;background:#0f0;color:#000;border:none;border-radius:20px;cursor:pointer;box-shadow:0 0 40px #0f0;}
    button:hover{transform:scale(1.1);}
    #required{font-size:180px;margin:40px 0;text-shadow:0 0 40px #0f0;}
    #typed{font-size:120px;color:#0ff;text-shadow:0 0 30px #0ff;min-height:140px;}
    #timer{font-size:60px;color:#f33;margin:20px;}
    .pulse{animation:pulse 0.6s infinite;}
    @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.2)}}
    #msg{position:fixed;bottom:80px;font-size:40px;color:#f66;opacity:0;transition:opacity .5s;}
    #msg.show{opacity:1;}
    #info{position:absolute;top:20px;left:20px;font-size:20px;color:#aaa;}
  </style>
</head>
<body>

  <div id="startScreen">
    <h1>LAST LETTER</h1>
    <button onclick="startGame()">PLAY</button>
    <div style="margin-top:30px;color:#0f0;">
      Using: <span id="source">Loading word list...</span>
    </div>
  </div>

  <div id="game">
    <div id="info">
      Hearts Hearts Hearts | STREAK <span id="streak">0</span>
    </div>
    <div id="required">?</div>
    <div id="typed"></div>
    <div id="timer">10</div>
    <div id="msg"></div>
  </div>

  <script>
    const requiredEl = document.getElementById('required');
    const typedEl = document.getElementById('typed');
    const timerEl = document.getElementById('timer');
    const streakEl = document.getElementById('streak');
    const sourceEl = document.getElementById('source');
    const msgEl = document.getElementById('msg');

    let words = new Set();
    let used = new Set();
    let currentLetter = '', typed = '';
    let lives = 3, streak = 0, best = parseInt(localStorage.getItem('best')||'0');
    let timer = 10, timerId = null, gameActive = false;

    // TRY TO LOAD YOUR word.txt FIRST
    fetch('word.txt')
      .then(r => r.text())
      .then(text => {
        const loaded = text.split('\n')
          .map(w => w.trim().toLowerCase())
          .filter(w => w.length >= 2 && /^[a-z]+$/.test(w));
        loaded.forEach(w => words.add(w));
        sourceEl.textContent = `word.txt (${words.size} words)`;
        console.log('Loaded from word.txt:', words.size, 'words');
      })
      .catch(() => {
        // IF word.txt NOT FOUND → use built-in list
        const builtin = "the of and a to in is you that it he was for on are as with his they be at one have this from or had by word but not what all were we when your can said there use an each which she do how their if will up other about out many then them these so some her would make like him into time has look two more go see no way could my than first been call who its now find long down day did get come made may part night light right fight might thought through after back give just name good new very over man me too any only little work know place year live give great think say help low line before turn cause much mean same tell boy follow came want show also around form three small set put end does another well large must big even such because turn here why ask went men read need land different home us move try kind hand picture again change off play spell air away animal house point page letter mother answer found study still learn should america world";
        builtin.split(' ').forEach(w => words.add(w));
        sourceEl.textContent = `built-in list (${words.size} words)`;
        console.log('word.txt not found → using built-in list');
      });

    function startGame() {
      document.getElementById('startScreen').style.display = 'none';
      document.getElementById('game').style.display = 'block';
      resetGame();
      nextTurn();
    }

    function resetGame() {
      used.clear(); streak = 0; lives = 3;
      updateHearts(); updateStreak();
    }

    function nextTurn() {
      typed = ''; typedEl.textContent = '';
      currentLetter = String.fromCharCode(97 + Math.floor(Math.random()*26));
      requiredEl.textContent = currentLetter.toUpperCase();

      timer = 10; timerEl.textContent = timer;
      timerEl.classList.remove('pulse');
      clearInterval(timerId);
      timerId = setInterval(() => {
        timer--;
        timerEl.textContent = timer;
        if (timer <= 3) timerEl.classList.add('pulse');
        if (timer <= 0) fail();
      }, 1000);
      gameActive = true;
    }

    function submit() {
      if (!gameActive) return;
      const word = typed.toLowerCase();
      if (word[0] !== currentLetter) return msg("Wrong letter!");
      if (!words.has(word)) return msg("Not in word list!");
      if (used.has(word)) return msg("Already used!");

      clearInterval(timerId);
      used.add(word);
      streak++;
      if (streak > best) { best = streak; localStorage.setItem('best', best); }
      updateStreak();
      setTimeout(nextTurn, 500);
    }

    function fail() {
      clearInterval(timerId);
      lives--;
      updateHearts();
      msg(lives > 0 ? "Time out!" : "GAME OVER");
      if (lives === 0) {
        gameActive = false;
        setTimeout(() => alert(`GAME OVER!\nStreak: ${streak}\nBest: ${best}`), 800);
      } else {
        setTimeout(nextTurn, 1200);
      }
    }

    function msg(text) {
      msgEl.textContent = text;
      msgEl.classList.add('show');
      setTimeout(() => msgEl.classList.remove('show'), 1000);
    }

    function updateHearts() {
      document.querySelector('#info').innerHTML = 
        'Hearts'.repeat(lives) + 'Broken Heart'.repeat(3-lives) + 
        ` | STREAK <span id="streak">${streak}</span> | Best: ${best}`;
    }
    function updateStreak() { streakEl.textContent = streak; }

    document.addEventListener('keydown', e => {
      if (!gameActive) return;
      if (/^[a-zA-Z]$/.test(e.key)) {
        typed += e.key.toLowerCase();
        typedEl.textContent = typed.toUpperCase();
      } else if (e.key === 'Backspace') {
        typed = typed.slice(0,-1);
        typedEl.textContent = typed.toUpperCase();
      } else if (e.key === 'Enter') {
        submit();
      }
    });
  </script>
</body>
</html>
